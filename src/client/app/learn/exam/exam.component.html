<md-card class="exam">
  <ng-container *ngIf="!started; else examStarted">
    <md-card-title>
      <h3 class="exam__title">Exam</h3>
    </md-card-title>
    <md-card-subtitle>
      <h4 class="exam__subtitle">{{level.name}}</h4>
    </md-card-subtitle>
  </ng-container>

  <ng-template #examStarted>
    <md-card-content>
      <re-test [test]="test" (hit)="onHit($event)" (miss)="onMiss($event)">
        <span class="exam__number">
          {{testIndex}} / {{level.tests.length}}
        </span>
      </re-test>
      <re-answer-history [histories]="histories"></re-answer-history>
    </md-card-content>
  </ng-template>

  <md-card-actions class="exam__actions">
    <button
      (click)="onStart()"
      *ngIf="!started; else flee"
      md-raised-button
      color="accent"
    >START</button>

    <ng-template #flee>
      <button
        (click)="onFlee()"
        md-raised-button
        color="warn"
      >FLEE</button>
    </ng-template>
  </md-card-actions>
</md-card>
